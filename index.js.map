{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from \"axios\";\n\nconst apiKey = '46889840-15974bab23e9bef03dd03027e';\nconst baseUrl = 'https://pixabay.com/api/';\nexport const perPage = 15;\n\nlet page = 1;\n\nexport async function fetchImages(search) {\n    const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(search)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const responce = await axios.get(url);\n        page += 1;\n        return responce.data;\n    } catch (error) {\n        throw new Error('Feiled to fetch images');\n    }\n}\n\nexport function resetPage() {\n    page = 1;\n}","'use strict';\n\nexport function renderImages(images) {\n    const gallery = document.getElementById('gallery');\n\n    images.forEach(image => {\n        const imgCard = document.createElement('div');\n        imgCard.classList.add('gallery-item');\n        imgCard.innerHTML = `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"img\">\n            </a>\n            <div class=\"info\">\n                <p class=\"text\">Likes: <span class=\"numbers\">${image.likes}</span></p>\n                <p class=\"text\">Views: <span class=\"numbers\">${image.views}</span></p>\n                <p class=\"text\">Comments: <span class=\"numbers\">${image.comments}</span></p>\n                <p class=\"text\">Downloads: <span class=\"numbers\">${image.downloads}</span></p>\n            </div>\n        `;\n        gallery.appendChild(imgCard);\n    });\n}\n\n","'use strict';\n\nimport { fetchImages, resetPage, perPage } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\n\nconst form = document.querySelector('.form');\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\n\n\nlet currentSearch = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', async function (e) {\n    e.preventDefault();\n\n    const search = document.getElementById('search').value.trim();\n    \n    if (!search) {\n        iziToast.error({ title: \"Error\", message: \"Search failed cannot be empty!\" });\n        return;\n    }\n\n    loader.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n\n    resetPage();\n    currentSearch = search;\n    gallery.innerHTML = '';\n\n    try {\n        const data = await fetchImages(currentSearch);\n        totalHits = data.totalHits;\n\n        if (totalHits === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                backgroundColor: \"#ff4d4f\",\n                iconColor: \"white\",\n                titleColor: \"white\",\n                messageColor: \"white\",\n                titleSize: \"16px\",\n                position: \"topRight\",\n                timeout: 5000,\n                maxWidth: 432,\n            });\n        } else {\n            renderImages(data.hits);\n            lightbox.refresh();\n            if (totalHits > perPage) loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        iziToast.error({ title: \"Error\", message: error.message });\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n    loader.style.display = 'block';\n\n    try {\n        const data = await fetchImages(currentSearch);\n        renderImages(data.hits);\n        lightbox.refresh();\n\n        if (gallery.children.length >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({\n                title: \"End\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n        } else {\n            const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n            window.scrollBy({ top: cardHeight * 4, behavior: \"smooth\" });\n        }\n    } catch (error) {\n        iziToast.error({ title: \"Error\", message: error.message });\n    } finally {\n        loader.style.display = 'none';\n    }\n});"],"names":["apiKey","baseUrl","perPage","page","fetchImages","search","url","responce","axios","resetPage","renderImages","images","gallery","image","imgCard","lightbox","SimpleLightbox","form","loader","loadMoreBtn","currentSearch","totalHits","e","iziToast","data","error","cardHeight"],"mappings":"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"}